<div *ngIf="isLoading$ | async; else content" class="center-spinner">
    <mat-spinner></mat-spinner>
</div>

<ng-template #content>
    <div *ngIf="task$ | async as task; else notFound" class="task-item-container">
        <mat-card appearance="outlined" class="task-item-card">
            <mat-card-header>
                <mat-card-title>
                    <h1 class="task-title">{{ task.title }}</h1>
                </mat-card-title>
            </mat-card-header>

            <mat-card-content>
                <p><strong i18n>Description:</strong> {{ task.description || 'No description' }}</p>
                <p><strong i18n>Due date:</strong> {{ task.dueDate | date:'mediumDate' }}</p>

                <mat-form-field appearance="fill">
                    <mat-label i18n>Status</mat-label>
                    <mat-select [value]="task.status" (selectionChange)="onStatusChange($event.value)"
                        [disabled]="isUpdatingStatus$ | async">
                        <mat-option *ngFor="let status of statuses" [value]="status">
                            {{ status }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-card-content>

            <mat-card-actions align="end" class="task-card-actions">
                <button mat-flat-button color="primary" [disabled]="isUpdatingStatus$ | async" (click)="onBack()"
                    i18n>Back</button>
                <button mat-flat-button color="warn" [disabled]="isUpdatingStatus$ | async" (click)="onDelete(task)"
                    i18n>Delete</button>
            </mat-card-actions>
        </mat-card>
    </div>
</ng-template>

<ng-template #notFound>
    <div class="center-spinner">
        <h3 *ngIf="taskNotFound" i18n>Task does not exist.</h3>
    </div>
</ng-template>