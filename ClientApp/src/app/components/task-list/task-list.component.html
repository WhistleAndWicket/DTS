<div *ngIf="isLoading$ | async; else content" class="center-spinner">
    <mat-spinner></mat-spinner>
</div>


<div class="mat-elevation-z8">
    <ng-template #content>
        <mat-table [dataSource]="dataSource" class="full-width-table">

            <!-- ID Column -->
            <ng-container matColumnDef="id">
                <mat-header-cell *matHeaderCellDef i18n> ID </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.id}} </mat-cell>
            </ng-container>

            <!-- Title Column -->
            <ng-container matColumnDef="title">
                <mat-header-cell mat-header-cell *matHeaderCellDef i18n> Title </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.title}} </mat-cell>
            </ng-container>

            <!-- Description Column -->
            <ng-container matColumnDef="description">
                <mat-header-cell *matHeaderCellDef i18n> Description </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.description}} </mat-cell>
            </ng-container>

            <!-- Status Column -->
            <ng-container matColumnDef="status">
                <mat-header-cell *matHeaderCellDef i18n> Status </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.status}} </mat-cell>
            </ng-container>

            <!-- Due Date Column -->
            <ng-container matColumnDef="dueDate">
                <mat-header-cell *matHeaderCellDef i18n> Due Date </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.dueDate | date:'mediumDate'}} </mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;" (click)="onRowClick(row)" class="task-row">
            </mat-row>

            <!-- No Data Row -->
            <ng-container matColumnDef="noData">
                <mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns.length" class="no-data">
                    <p *ngIf="dataSource.data.length === 0" i18n>No tasks available. Click "Create Task" to add a new
                        task.
                    </p>
                </mat-footer-cell>
            </ng-container>

            <mat-footer-row *matFooterRowDef="['noData']"></mat-footer-row>
        </mat-table>
    </ng-template>

    <mat-paginator #paginator [length]="dataSource.data.length" [pageSize]="5" [pageSizeOptions]="pageSizeOptions"
        [disabled]="dataSource.data.length === 0" showFirstLastButtons
        aria-label="Select page of task items"></mat-paginator>
</div>