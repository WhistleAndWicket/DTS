# Frontend Setup (ClientApp)
This is the Angular frontend for the DTS application. It interacts with the backend API generated by NSwagger.

## Prerequisites
- [Visual Studio Code](https://code.visualstudio.com/)
- [Angular CLI](https://angular.io/cli) 18.2.13
- [Node.js](https://nodejs.org/en/) >= 18.15.0
- [npm](https://www.npmjs.com/) >= 9.5.0
- [TypeScript](https://www.typescriptlang.org/) ~5.4.2

**Note**: Ensure Node.js and npm are installed globally. You can verify by running:
```bash
node -v
npm -v
ng version
```
## Project Setup
1. Navigate to the `ClientApp` folder
2. Install dependencies `npm install`
3. Run the application through `npm run start` or `ng serve`
4. Open your browser at `http://localhost:4200/dashboard`

## Libraries used
- Angular Material ^18.2.14
- RxJS ~7.8.0
- `@angular/localize` for localization
- Angular Material provides UI components like dialogs, cards, tables, and forms.

## Folder Structure
```graphql
src/app
├── components    # Angular components (home page, dialogs, task list, etc.)
├── models        # Dialog models.
├── services      # State service and autogenerated API services from NSwagger.
└── environments  # API base URL configuration and other environment settings.
```

## Notes on Services
- `task-item.state.service.ts` handles application state using BehaviorSubjects.
- `dts-api.ts` is the autogenerated API client from NSwagger. **Do not manually edit**.
- Parent components subscribe to `taskItems$` and `selectedTaskItem$` for reactive updates.

## Angular Material Table Limitations
- Only pagination is implemented.
- Sorting, filtering, and advanced state management are not implemented.
- These features may need custom implementation if required in future.

## API Configuration
- API base URL is set in `src/environments/environment.ts`.
    - This is copied from the backend [launchSettings.json](../Api/Properties/launchSettings.json) file.
- Make sure it matches the running API backend URL (e.g., https://localhost:7156).

## Usage/Quick start
- Navigate to `http://localhost:4200/dashboard` - The Home Page will display all task items in a paginated Material table.
- If there are no items, a message will be displayed 
> "No tasks available. Click "Create Task" to add a new task."
- Home Page (`HomePageComponent`)
    - Displays all task items in a paginated Material Table (`TaskListComponent`).
    - Use the paginator to navigate pages.
    - Click a table row to view task details.
- Create a New Task (`CreateTaskDialogComponent`)
    - Click the **Create** button on the top-right of the Home Page.
    - A Material Dialog will open with the following fields:
        - Title (required)
        - Description (optional)
        - Due Date (required)
        - Status (dropdown, default = Created)
    - The **Save** button will be disabled until all required fields are valid.
    - On saving, the new task will be added and automatically reflected in the table. It gets redirected to the Task Detail page.
- Task Detail Page (`TaskItemComponent`)    
    - Displays task details in a Material Card:
        - Title
        - Description
        - Due Date
    - Only the status can be updated from a dropdown.
    - Updates are immediately reflected in the task list through the state service.
    - Clicking the `Back` button preserves the current page in the table.
    - Clicking the `Delete` button prompts a confirmation dialog:
    > "Are you sure you want to delete this task? This action cannot be undone."
    - On confirmation, the task is deleted and removed from the task list.
- State Management
    - `TaskItemStateService` handles loading, creating, updating, and deleting tasks.
    - Uses `BehaviorSubject` to automatically update all subscribed components.
- Notes    
    - Localization is supported via `$localize` for future i18n.

